<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"> <!-- Character encoding -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Responsive design -->
    <script src="https://code.playcanvas.com/playcanvas-stable.js"></script> <!-- PlayCanvas library -->
    <title>Warlords</title> <!-- Page title -->
    <link rel="stylesheet" type="text/css" href="./game.css"> <!-- Link to external CSS stylesheet -->
</head>
<body>
    <canvas id="canvas"></canvas> <!-- Canvas for rendering the game -->
    <div id="countdown">05:00</div> <!-- Countdown timer -->
    <div id="overlay"> <!-- Overlay for game over message -->
        <div id="gameOverMessage">Time's up!</div> <!-- Game over message -->
        <button id="restartButton">Play Again</button> <!-- Button to restart the game -->
    </div>

    <script src="index.ts" type="module"></script> <!-- Main game script -->
    <script>
        // Load background music
        const audio = new Audio('public/music/game-overdrive-253440.mp3');
        audio.loop = true; // Loop the audio
        audio.volume = 0.5; // Set volume (value from 0.0 to 1.0)
        audio.play(); // Play audio

        const countdownElement = document.getElementById('countdown');
        const overlay = document.getElementById('overlay');
        let totalTime = 5 * 60; // Total time is 5 minutes

        function startCountdown() {
            const interval = setInterval(() => {
                const minutes = Math.floor(totalTime / 60); // Calculate minutes
                const seconds = totalTime % 60; // Calculate seconds

                countdownElement.textContent = 
                    String(minutes).padStart(2, '0') + ':' + 
                    String(seconds).padStart(2, '0');

                if (totalTime <= 0) {
                    clearInterval(interval); // Stop countdown
                    countdownElement.textContent = "Time's up!"; // Display message
                    showGameOverScreen(); // Show game over screen
                }

                totalTime--; // Decrease total time
            }, 1000); // Countdown every second
        }

        function showGameOverScreen() {
            overlay.style.display = 'flex'; // Show overlay when time is up
        }

        document.getElementById('restartButton').addEventListener('click', () => {
            location.reload(); // Reload the page when the play again button is clicked
        });

        startCountdown(); // Start countdown
    </script>
</body>
</html>
